<section data-section-id="{{ section.id }}" data-section-type="kobe-videos">
  <div class="kobe">
    <div class="wrapper">
      <h2 class="kobe-title">{{ section.settings.title }}</h2>
      <div class="kobe-subtitle">
        {{ section.settings.subtitle }}
      </div>
    </div>
    <div class="kobe-flush">
      <div class="videos-display" data-videos-display>
        {% for block in section.blocks %}
          {% assign video_type = '' %}
          {% assign url = block.settings.video_file_url %}

          {% if url contains '.mp4' %}
            {% assign video_type = 'mp4' %}
          {% elsif url contains '.og' %}
            {% assign video_type = 'ogg' %}
          {% elsif url contains '.avi' %}
            {% assign video_type = 'avi' %}
          {% elsif url contains '.webm' %}
            {% assign video_type = 'webm' %}
          {% endif %}
      
          <div class="video-player" {{ block.shopify_attributes }} data-player="{{ forloop.index }}">
            {% for i in (1..3) %}
              <video muted playsinline autoplay>
                {% if video_type != '' %}
                  <source data-src="{{ url }}" type="video/{{ video_type }}" />
                {% endif %}
              </video>
            {% endfor %}
          </div>
        {% endfor %}
      </div>
    </div>
    <div class="kobe-numbers-mobile">
      <div class="kobe-numbers-slideshow" data-numbers-slideshow>
        {% for i in (1..13) %}
          {% assign num = forloop.index | prepend: '00' | slice: -2, 2 %}
          {% assign snippet_title = 'UND-KOBE-NUMBERS-SVG-' | append: num %}
          <div>
            <div class="kobe-num" data-number="{{ i }}">
              {% include snippet_title %}
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
    <div class="kobe-numbers-desk">
      {% for i in (1..13) %}
        {% assign num = forloop.index | prepend: '00' | slice: -2, 2 %}
        {% assign snippet_title = 'UND-KOBE-NUMBERS-SVG-' | append: num %}
        <div class="kobe-num" data-number="{{ i }}">
          {% include snippet_title %}
        </div>
      {% endfor %}
    </div>

    <div class="kobe-footer">
      <div class="wrapper">
        <h3 class="kobe-footer__title">{{ section.settings.footer_title }}</h3>
        <h5 class="kobe-footer__subtitle">{{ section.settings.footer_subtitle }}</h5>
        <div style="letter-spacing: 0.06em; text-decoration: underline">{{ section.settings.footer_subsubtitle }}</div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Kobe - Videos",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title"
    },
    {
      "type": "richtext",
      "id": "subtitle",
      "label": "Subtitle"
    },
    {
      "type": "header",
      "content": "Videos Footer"
    },      
    {
      "type": "text",
      "id": "footer_title",
      "label": "Title"
    },
    {
      "type": "text",
      "id": "footer_subtitle",
      "label": "Subtitle"
    },
    {
      "type": "richtext",
      "id": "footer_subsubtitle",
      "label": "Subsubtitle"
    }
  ],
  "blocks": [
    {
      "type": "video",
      "name": "Video",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title"
        },
        {
          "type": "url",
          "id": "video_file_url",
          "label": "Video File URL"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Videos",
      "category": "Kobe",
      "settings": {
        "title": "Do it for Kobe!"
      },
      "blocks": []
    }
  ]
}
{% endschema %}
